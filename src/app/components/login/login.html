<div class="login-container">
  <div class="login-wrapper">
    <mat-card class="login-card">
      <mat-card-header>
        <div class="header-content">
          <h1 style="color: #8B4A5C !important;">{{ 'LOGIN.TITLE' | translate }}</h1>
      <p>{{ 'LOGIN.SUBTITLE' | translate }}</p>
        </div>
      </mat-card-header>

      <mat-card-content>
        <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="login-form">
          @if (error()) {
            <div class="error-message">
              <mat-icon>error</mat-icon>
              <span>{{ error() }}</span>
            </div>
          }

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>{{ 'LOGIN.EMAIL' | translate }}</mat-label>
            <input
              matInput
              type="email"
              formControlName="email"
              [placeholder]="'LOGIN.EMAIL_PLACEHOLDER' | translate"
              autocomplete="email"
            >
            <mat-icon matSuffix>email</mat-icon>
            @if (loginForm.get('email')?.invalid && loginForm.get('email')?.touched) {
              <mat-error>{{ getErrorMessage('email') }}</mat-error>
            }
          </mat-form-field>

          <mat-form-field appearance="outline" class="full-width">
              <mat-label>{{ 'LOGIN.PASSWORD' | translate }}</mat-label>
              <input
                matInput
                [type]="hidePassword() ? 'password' : 'text'"
                formControlName="password"
                [placeholder]="'LOGIN.PASSWORD_PLACEHOLDER' | translate"
                autocomplete="current-password"
              >
            <button
              mat-icon-button
              matSuffix
              type="button"
              (click)="togglePasswordVisibility()"
              [attr.aria-label]="'LOGIN.SHOW_PASSWORD' | translate"
              [attr.aria-pressed]="!hidePassword()"
            >
              <mat-icon>{{ hidePassword() ? 'visibility_off' : 'visibility' }}</mat-icon>
            </button>
            @if (loginForm.get('password')?.invalid && loginForm.get('password')?.touched) {
              <mat-error>{{ getErrorMessage('password') }}</mat-error>
            }
          </mat-form-field>

          <div class="form-options">
            <mat-checkbox formControlName="rememberMe">
              {{ 'LOGIN.REMEMBER_ME' | translate }}
            </mat-checkbox>
            <a routerLink="/forgot-password" class="forgot-link">
              {{ 'LOGIN.FORGOT_PASSWORD' | translate }}
            </a>
          </div>

          <button
            mat-raised-button
            type="submit"
            class="login-button full-width"
            [disabled]="loginForm.invalid || isLoading()"
            style="background-color: #8B4A5C !important; color: white !important; border: none !important;"
          >
            @if (isLoading()) {
              <mat-spinner diameter="20"></mat-spinner>
              {{ 'LOGIN.LOGGING_IN' | translate }}
            } @else {
              {{ 'LOGIN.LOGIN_BUTTON' | translate }}
            }
          </button>
        </form>

        <mat-divider class="divider"></mat-divider>

        <div class="signup-section">
          <p>{{ 'LOGIN.NO_ACCOUNT' | translate }}</p>
          <a routerLink="/register" mat-button color="accent">
            {{ 'LOGIN.CREATE_ACCOUNT' | translate }}
          </a>
        </div>

      </mat-card-content>
    </mat-card>
  </div>
</div>